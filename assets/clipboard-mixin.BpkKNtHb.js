import{c as t}from"./clipboard-web.CSIX01uu.js";import{i as e,I as n,a as s}from"./utils.BsR7fOrh.js";import{al as a,_ as o,c as i,k as r,o as l,n as c,z as u,q as d,r as p,d as f,w as h,e as y,t as m}from"./index-dUtMVM0l.js";import{g as v}from"./event.CkfzVcZx.js";function g(t){return new Promise((function(e,n){wx?wx.setClipboardData({data:"".concat(t),success:function(){e()},fail:function(t){console.log(t),n()}}):n()}))}function b(t){return t.replace(/^(\w)/,((t,e)=>`data${e.toUpperCase()}`))}function $(t){Object.keys(t).forEach((e=>{this[b(e)]=t[e]}))}const C="#fff",k={selector:"#press-notify",type:"danger",message:"",background:"",duration:3e3,show:!0,zIndex:110,top:0,color:C,safeAreaInsetTop:!1,onClick:()=>{},onOpened:()=>{},onClose:()=>{},animationDuration:300},S={customClass:{type:String,default:""}},T={multipleSlots:!0,addGlobalClass:!0},w=/^-?\d+(\.\d+)?$/;function D(t){if(null!=t)return w.test(`${t}`)?`${t}px`:t}let I={};function E(){if(s())return 0;const{statusBarHeight:t}=function(){try{Object.keys(I).length||"undefined"==typeof uni||("function"==typeof uni.getWindowInfo?I=uni.getWindowInfo():"function"==typeof uni.getSystemInfoSync&&(I=uni.getSystemInfoSync()))}catch(t){console.log("[getAppBaseInfo] err",t)}return I}();return t}function O(t){return setTimeout((()=>{t()}),1e3/30)}const j=(t,e)=>{const{enterClass:n,enterActiveClass:s,enterToClass:a,leaveClass:o,leaveActiveClass:i,leaveToClass:r}=e;return{enter:`press-${t}-enter press-${t}-enter-active ${n} ${s}`,"enter-to":`press-${t}-enter-to press-${t}-enter-active ${a} ${s}`,leave:`press-${t}-leave press-${t}-leave-active ${o} ${i}`,"leave-to":`press-${t}-leave-to press-${t}-leave-active ${r} ${i}`}};function x(t){return void 0===t?"":Array.isArray(t)?t.filter((t=>null!=t&&""!==t)).map((t=>x(t))).join(";"):"string"==typeof t?t:Object.keys(t).filter((e=>null!=t[e]&&""!==t[e])).map((e=>{return[(n=e,n.replace(/[A-Z]/g,(t=>`-${t}`)).toLowerCase()),[t[e]]].join(":");var n})).join(";")}const A={rootStyle:function(t){return x([{"-webkit-transition-duration":`${t.currentDuration}ms`,"transition-duration":`${t.currentDuration}ms`},t.display?null:"display: none",t.customStyle])}};var B;const N=o({name:"PressTransition",mixins:[(B=!0,{props:{customStyle:{type:[String,Object],default:""},show:{type:Boolean,default:B},duration:{type:[Number,Object,null],default:300},name:{type:String,default:"fade"}},data(){return{type:"",inited:!1,display:!1,dataName:this.name}},watch:{show:{handler(...t){this.observeShow(...t)}},name:{handler(t){this.dataName=t}}},mounted(){!0===this.show&&this.observeShow(!0,!1)},methods:{observeShow(t,e){t!==e&&(t?this.enter():this.leave())},callback(t){"function"==typeof this[`${t}Callback`]&&this[`${t}Callback`]()},enter(){const{duration:t,dataName:n}=this,s=j(n,this),a=e(t)?t.enter:t;this.status="enter",this.$emit("before-enter"),this.callback("beforeEnter"),O((()=>{"enter"===this.status&&(this.$emit("enter"),this.setData({inited:!0,display:!0,classes:s.enter,currentDuration:a}),this.callback("enter"),O((()=>{"enter"===this.status&&(this.transitionEnded=!1,this.setData({classes:s["enter-to"]}))})))}))},leave(){if(!this.display)return;const{duration:t,dataName:n}=this,s=j(n,this),a=e(t)?t.leave:t;this.status="leave",this.$emit("before-leave"),this.callback("beforeLeave"),O((()=>{"leave"===this.status&&(this.$emit("leave"),this.setData({classes:s.leave,currentDuration:a}),this.callback("leave"),O((()=>{"leave"===this.status&&(this.transitionEnded=!1,setTimeout((()=>this.onTransitionEnd()),a),this.setData({classes:s["leave-to"]}))})))}))},onTransitionEnd(){if(this.transitionEnded)return;this.transitionEnded=!0,this.$emit(`after-${this.status}`),this.callback("enter"===this.status?"afterEnter":"afterLeave");const{show:t,display:e}=this;!t&&e&&this.setData({display:!1})}}})],props:{overlay:{type:Boolean,default:!1},enterClass:{type:String,default:""},enterActiveClass:{type:String,default:""},enterToClass:{type:String,default:""},leaveClass:{type:String,default:""},leaveActiveClass:{type:String,default:""},leaveToClass:{type:String,default:""},afterEnterCallback:{type:Function,default:()=>()=>{}},afterLeaveCallback:{type:Function,default:()=>()=>{}},enterCallback:{type:Function,default:()=>()=>{}},leaveCallback:{type:Function,default:()=>()=>{}},beforeEnterCallback:{type:Function,default:()=>()=>{}},beforeLeaveCallback:{type:Function,default:()=>()=>{}},...S},emits:["click","touchmove","before-enter","enter","after-enter","before-leave","leave","after-leave"],data:()=>({classes:""}),options:{...T,styleIsolation:"shared"},computed:{rootStyle(){const{currentDuration:t,display:e,customStyle:n}=this;return A.rootStyle({currentDuration:t,display:e,customStyle:n})},transitionClass(){const{customClass:t,overlay:e,classes:n}=this;return`press-transition ${n} ${t} ${e?"press-overlay":""}`}},methods:{setData(t){Object.keys(t).forEach((e=>{this[e]=t[e]}))},onClick(){this.$emit("click")},onTouchmove(t){this.$emit("touchmove",t)}}},[["render",function(t,e,n,s,a,o){return t.inited?(l(),i("div",{key:0,class:d(o.transitionClass),style:u(o.rootStyle),onTransitionend:e[0]||(e[0]=(...e)=>t.onTransitionEnd&&t.onTransitionEnd(...e)),onClick:e[1]||(e[1]=(...t)=>o.onClick&&o.onClick(...t)),onTouchmove:e[2]||(e[2]=(...t)=>o.onTouchmove&&o.onTouchmove(...t))},[c(t.$slots,"default",{},void 0,!0)],38)):r("",!0)}],["__scopeId","data-v-6818398f"]]);const _={rootStyle:function(t){return x({"z-index":t.zIndex,top:D(t.top)})},notifyStyle:function(t){return x({background:t.background,color:t.color})}},z={show:{type:Boolean,default:!1},message:{type:String,default:""},background:{type:String,default:""},type:{type:String,default:"danger"},color:{type:String,default:C},zIndex:{type:Number,default:110},safeAreaInsetTop:{type:Boolean,default:!1},top:{type:[null,String,Number],default:null},...S},F={name:"PressNotify",options:{...T,styleIsolation:"shared"},components:{PressTransition:N},mixins:[(L=z,{data(){return{...(t=this,e=L,Object.keys(e).reduce(((e,n)=>(e[b(n)]=t[n],e)),{}))};var t,e},watch:{...(P=L,Object.keys(P).reduce(((t,e)=>(t[e]={handler(t){this[b(e)]=t}},t)),{}))},methods:{setData(t){$.call(this,t)}}})],props:z,emits:[],data:()=>({onOpened:null,onClose:null,onClick:null,computed:_}),watch:{},created(){const t=E();this.statusBarHeight=t},methods:{onTap(t){const{onClick:e}=this;e&&e(v(t))}}};var L,P;const H=function({defaultOptions:t,component:s}){let o={},i=[],r=!1,l={...t};const c=t.selector&&t.selector.slice(1)||"component-default-id";function u({multiple:t,component:e,dialogId:s}){if(n)return{};if(i=i.filter((t=>{return!t.$el.parentNode||(e=t.$el,document.body.contains(e));var e})),!i.length||t){const t=document.getElementById(s);t&&t.parentElement&&t.parentElement.removeChild(t);const n=document.createElement("div");n.id=s,document.body.appendChild(n);const o=function(t,e,n={}){let s;return s=a(e,{...n}).mount(t),s}(n,e);o&&"function"==typeof o.$on&&o.$on("input",(t=>{o.value=t})),i.push(o)}return i[i.length-1]}function d(t={duration:0}){const n=u({multiple:r,component:s,dialogId:c});return t=function(t,n="message"){return e(t)?t:{[n]:t}}(t),t={...l,...o[t.type||l.type],...t},d.getOptions=()=>t,n.clear=()=>{n.setData({show:!1}),t.onClose&&t.onClose(),i=i.filter((t=>t!==n)),setTimeout((()=>{document.body.contains(n.$el)&&n.$el&&n.$el.parentNode.removeChild(n.$el)}),t.animationDuration||0)},n.set=(...t)=>{"function"==typeof n.$set?n.$set(n,...t):n[t[0]]=t[1]},n.setData(t),clearTimeout(n.timer),n.setData({show:!0}),t.duration>0&&(n.timer=setTimeout((()=>{n.clear()}),t.duration)),n}return d.clear=t=>{i.length&&(t?(i.forEach((t=>{t.clear()})),i=[]):r?i.shift().clear():i[0].clear())},d.setDefaultOptions=(t,e)=>{"string"==typeof t?o[t]=e:Object.assign(l,t)},d.resetDefaultOptions=e=>{"string"==typeof e?o[e]=null:(l={...t},o={})},d.allowMultiple=(t=!0)=>{r=t},d.install=()=>{},d}({defaultOptions:k,component:o(F,[["render",function(t,e,n,s,a,o){const c=p("PressTransition");return l(),i("div",{class:"press-notify-index"},[f(c,{name:"slide-down",show:t.dataShow,"custom-class":"press-notify__container","custom-style":a.computed.rootStyle({zIndex:t.dataZIndex,top:t.dataTop}),onClick:o.onTap},{default:h((()=>[y("div",{class:d("press-notify press-notify--"+t.dataType),style:u(a.computed.notifyStyle({background:t.dataBackground,color:t.dataColor}))},[t.dataSafeAreaInsetTop?(l(),i("div",{key:0,style:u("height: "+t.statusBarHeight+"px")},null,4)):r("",!0),y("span",null,m(t.dataMessage),1)],6)])),_:1},8,["show","custom-style","onClick"])])}],["__scopeId","data-v-bf42647f"]])});let M;M=H,M.clear,M.setDefaultOptions,M.resetDefaultOptions;const W={data(){let t=0;return t=44,{offsetTop:44}},methods:{copyIconTag(e){const n=this;(function(e){let n=g;return n=t,n(`${e}`)})(e).then((()=>{M({type:"success",duration:1500,message:`${n.t("copied")}ï¼š${e}`,top:n.offsetTop})}))}}};export{W as C};

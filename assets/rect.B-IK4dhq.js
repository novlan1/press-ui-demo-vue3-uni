import{ao as t,ap as e,i as o,ag as n}from"./index-DDfOvTF0.js";const i={"css.var":"--a:0","css.env":"top:env(a)","css.constant":"top:constant(a)"};function r(t){return e=i[t],window.CSS&&CSS.supports&&(CSS.supports(e)||CSS.supports.apply(CSS,e.split(":")));var e}const s=["top","left","right","bottom"],c={},l=[];let a,d;function p(t,e){const o=t.style;Object.keys(e).forEach((t=>{const n=e[t];o[t]=n}))}const u=[];function h(t){t?u.push(t):u.forEach((t=>{t()}))}function f(){if("string"==typeof d||(d="CSS"in window&&"function"==typeof CSS.supports?CSS.supports("top: env(safe-area-inset-top)")?"env":CSS.supports("top: constant(safe-area-inset-top)")?"constant":"":""),!d)return void s.forEach((t=>{c[t]=0}));function e(e,o){const n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),a=1e4,u={position:"absolute",width:"100px",height:"200px",boxSizing:"border-box",overflow:"hidden",paddingBottom:`${d}(safe-area-inset-${o})`};p(n,u),p(i,u),p(r,{transition:"0s",animation:"none",width:"400px",height:"400px"}),p(s,{transition:"0s",animation:"none",width:"250%",height:"250%"}),n.appendChild(r),i.appendChild(s),e.appendChild(n),e.appendChild(i),h((()=>{i.scrollTop=a,n.scrollTop=a;let e=n.scrollTop,r=i.scrollTop;function s(){this.scrollTop!==(this===n?e:r)&&(i.scrollTop=a,n.scrollTop=a,e=n.scrollTop,r=i.scrollTop,function(t){m.length||setTimeout((()=>{const t={};m.forEach((e=>{t[e]=c[e]})),m.length=0,l.forEach((e=>{e(t)}))}),0);m.push(t)}(o))}n.addEventListener("scroll",s,t),i.addEventListener("scroll",s,t)}));const f=getComputedStyle(n);Object.defineProperty(c,o,{configurable:!0,get:()=>parseFloat(f.paddingBottom)})}const o=document.createElement("div");p(o,{position:"absolute",left:"0",top:"0",width:"0",height:"0",zIndex:"-1",overflow:"hidden",visibility:"hidden"}),s.forEach((t=>{e(o,t)})),document.body.appendChild(o),h(),a=!0}function w(t){return a||f(),c[t]}const m=[];const g={get top(){return w("top")},get left(){return w("left")},get right(){return w("right")},get bottom(){return w("bottom")}};function v(){if(r("css.var")){const{style:t}=document.documentElement,e=parseInt((t.getPropertyValue("--window-top").match(/\d+/)||["0"])[0],10),o=parseInt((t.getPropertyValue("--window-bottom").match(/\d+/)||["0"])[0],10),n=parseInt((t.getPropertyValue("--window-left").match(/\d+/)||["0"])[0],10),i=parseInt((t.getPropertyValue("--window-right").match(/\d+/)||["0"])[0],10),r=parseInt((t.getPropertyValue("--top-window-height").match(/\d+/)||["0"])[0],10);return{top:(e?e+g.top:0)+(r||0),bottom:o?o+g.bottom:0,left:n?n+g.left:0,right:i?i+g.right:0}}let t=0;const o=e();if(o.length){const e=o[o.length-1].$parent.$parent.navigationBar.type;t="default"===e||"float"===e?44:0}return{top:t,bottom:0,left:0,right:0}}const y=/scroll|auto|overlay/i;function S(t,e){void 0===e&&(e=window);let o=t;for(;o&&"HTML"!==o.tagName&&"BODY"!==o.tagName&&1===o.nodeType&&o!==e;){const{overflowY:t}=window.getComputedStyle(o);if(y.test(t))return o;o=o.parentNode}return e}function b(t){const e="scrollTop"in t?t.scrollTop:t.pageYOffset;return Math.max(e,0)}function C(t){let e=t;return t.startsWith("#")||(e=`#${t}`),e=`${e} > .uni-scroll-view > .uni-scroll-view`,e}function T(t){const{top:e=0}=v();return o()||(()=>{let t=!1;return t=!0,!0})()?t-e:t}function E(){if(o()){const t=Math.min(window.innerWidth,document.documentElement.clientWidth,screen.width);let e=Math.min(window.innerHeight,document.documentElement.clientHeight,screen.height);const{top:o,bottom:n}=v();return e-=o,e-=n,{windowWidth:t,windowHeight:e,windowTop:o,windowBottom:n}}const{windowWidth:t,windowHeight:e,windowTop:i,windowBottom:r}=n();return{windowWidth:t,windowHeight:e,windowTop:i,windowBottom:r}}function x(){if(o())return 0;const{statusBarHeight:t}=n();return t}function B(t,e){return new Promise((o=>{const n=C(e),i=t.$el;if(i){const t=i.querySelector(n);return t||o({}),void o({scrollHeight:t.scrollHeight,scrollTop:t.scrollTop})}uni.createSelectorQuery().in(t).select(n).fields({scrollOffset:!0},(t=>{o(t)})).exec()}))}function H(t,e,o=!1){return new Promise((n=>{const i=null==t?void 0:t.$el;let r=null==i?void 0:i.querySelector(e);if(!r&&o&&(r=document.querySelector(e)),r){const t=r.getBoundingClientRect()||{},{top:e}=v();let o={left:t.left,right:t.right,width:t.width,height:t.height,x:t.x,y:t.y,top:t.top,bottom:t.bottom};o={...o,top:t.top-e,bottom:t.bottom-e},n(o)}else n({})}))}function P(t,e){return new Promise((o=>{const n=t.$el;if(n){const t=[...n.querySelectorAll(e)].map((t=>t.getBoundingClientRect()));o(t)}else uni.createSelectorQuery().in(t).selectAll(e).boundingClientRect().exec(((t=[])=>{o(t[0])}))}))}export{H as a,P as b,x as c,S as d,E as e,b as f,T as g,C as h,B as i};

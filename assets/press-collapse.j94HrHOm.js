import{Y as t,_ as e,x as s,C as i,P as a,z as l,an as n,E as o,u as d,c as r,d as c,e as p,w as u,B as h,q as m,n as y,r as f,o as g,y as S}from"./index-DCu1HSzP.js";import{a as x}from"./rect.f7zOVtkz.js";function C({height:t,duration:e}){return[`height: ${t};`,`transition: height ${e}ms ease-in-out 0ms, top ${e}ms ease-in-out 0ms, -webkit-transform ${e}ms ease-in-out 0ms, transform ${e}ms ease-in-out 0ms;`,"transform-origin: 50% 50% 0px;"].join("")}function b(e,s,i){x(e,".press-collapse-item__content").then((t=>t.height)).then((a=>{!function(e,s,i,a){if(s){if(0===a){const t=0;e.animationStyle=C({height:"auto",duration:t})}else{const t=i?300:1;e.animationStyle=C({height:`${a}px`,duration:t}),setTimeout((()=>{e.animationStyle=C({height:"auto",duration:0})}),t)}return}e.animationStyle=C({height:`${a}px`,duration:1}),t((()=>{e.animationStyle=C({height:0,duration:300})}))}(e,s,i,a)}))}const v=e({name:"PressCollapseItem",options:{...l,styleIsolation:"shared"},components:{PressCell:a},mixins:[i(n)],props:{size:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},border:{type:Boolean,default:!0},isLink:{type:Boolean,default:!0},titleClass:{type:String,default:""},titleStyle:{type:[String,Object],default:""},contentStyle:{type:[String,Object],default:""},contentClass:{type:String,default:""},...s},emits:[],data(){const{defaultExpandAll:t}=this[n]||{};return{expanded:!!t,animation:{},mounted:!1,animationStyle:t?"height: auto;":"height: 0;"}},computed:{cellTitleStyle:()=>({}),rightIconStyle:()=>({}),collapseItemClass(){const{disabled:t,expanded:e}=this;return o.bem2("collapse-item__title",{disabled:t,expanded:e})},collapseItemCustomClass(){let t="";return t=this.collapseItemClass,t},collapseItemContentStyle(){return d(this.contentStyle)},wrapperClass:()=>o.bem2("collapse-item__wrapper")},mounted(){this.updateExpanded(),this.mounted=!0},methods:{updateExpanded(){if(!this[n])return;const{value:t,accordion:e}=this[n],{children:s=[]}=this[n],{name:i}=this,a=s.indexOf(this),l=null==i?a:i,o=e?t===l:(t||[]).some((t=>t===l));o!==this.expanded&&b(this,o,this.mounted),this.expanded=o},onClick(){if(this.disabled)return;const{name:t,expanded:e}=this,s=this[n].children.indexOf(this),i=null==t?s:t;this[n].switch(i,!e)}}},[["render",function(t,e,s,i,a,l){const n=f("PressCell");return g(),r("div",{class:m(t.customClass+" press-collapse-item "+(0!==t.index?"press-hairline--top":""))},[c(n,{size:s.size,title:s.title,"title-class":s.titleClass,icon:s.icon,value:s.value,label:s.label,"is-link":s.isLink,clickable:s.clickable,border:s.border&&a.expanded,"custom-class":l.collapseItemCustomClass,"custom-style":s.titleStyle,"title-style":l.cellTitleStyle,"right-icon-style":l.rightIconStyle,"hover-class":"press-cell--hover",center:"",onClick:l.onClick},{title:u((()=>[y(t.$slots,"title",{},void 0,!0)])),"right-icon":u((()=>[y(t.$slots,"right-icon",{},void 0,!0)])),default:u((()=>[y(t.$slots,"value",{},void 0,!0)])),_:3},8,["size","title","title-class","icon","value","label","is-link","clickable","border","custom-class","custom-style","title-style","right-icon-style","onClick"]),p("div",{class:m(l.wrapperClass),style:h(a.animationStyle)},[p("div",{class:m(["press-collapse-item__content",s.contentClass]),style:h(l.collapseItemContentStyle)},[y(t.$slots,"default",{},void 0,!0)],6)],6)],2)}],["__scopeId","data-v-c14230ec"]]);const $=e({name:"PressCollapse",options:{...l},mixins:[S(n)],props:{value:{type:[Array,String],default:()=>[]},accordion:{type:Boolean,default:!1},border:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1},...s},watch:{value:{handler(){this.updateExpanded()}},accordion:{handler(){this.updateExpanded()}}},created(){this.children=[]},methods:{updateExpanded(){this.children.forEach((t=>{t.updateExpanded()}))},switch(t,e){const{accordion:s,value:i}=this,a=t;t=s?e?t:"":e?(i||[]).concat(t):(i||[]).filter((e=>e!==t)),e?this.$emit("open",a):this.$emit("close",a),this.$emit("change",t),this.$emit("input",t)}}},[["render",function(t,e,s,i,a,l){return g(),r("div",{class:m(t.customClass+" press-collapse "+(s.border?"press-hairline--top-bottom":""))},[y(t.$slots,"default")],2)}]]);export{v as P,$ as a};

import{_ as e,u as t,c as a,e as r,B as i,n as s,q as l,o as n,t as o,g,w as m,r as d,h as p,d as h,j as c}from"./index-_6p3YC47.js";const u={gapX:{type:Number,default:0},gapY:{type:Number,default:0},image:{type:String,default:""},width:{type:Number,default:100},height:{type:Number,default:100},rotate:{type:[Number,String],default:-22},zIndex:{type:[Number,String],default:100},content:{type:String,default:""},opacity:{type:[Number,String],default:1},fullPage:{type:Boolean,default:!1},textColor:{type:String,default:"#dcdee0"}};const w=e({i18n:{"zh-CN":{switch:"切换",customOpacity:"自定义透明度",customGap:"自定义间隔",customImage:"自定义图片",customRotate:"自定义倾斜角度",displayRange:"显示范围",htmlWatermark:"HTML 水印",textWatermark:"文字水印",imageWatermark:"图片水印"},"en-US":{switch:"Switch",customOpacity:"Custom opacity",customGap:"Custom Gap",customRotate:"Custom Rotate",displayRange:"Display Range",htmlWatermark:"HTML Watermark",textWatermark:"Text Watermark",imageWatermark:"Image Watermark"}},components:{PressWatermark:e({name:"PressWatermark",components:{PressWatermarkWeb:e({name:"PressWatermarkWeb",props:{...u},data:()=>({imageBase64:"",watermarkUrl:""}),computed:{computedStyle(){return t({backgroundImage:`url(${this.watermarkUrl})`,zIndex:this.zIndex})},rotateStyle(){return t({transformOrigin:"center",transform:`rotate(${this.rotate}deg)`})},svgWidth(){return this.width+this.gapX},svgHeight(){return this.height+this.gapY},imageHtml(){const{imageBase64:e,width:t,height:a,rotateStyle:r}=this;return`<image\n          href="${e}"\n          xlink:href="${e}"\n          x="0"\n          y="0"\n          width="${t}"\n          height="${a}"\n          style="${r}"\n        />`}},watch:{image:{handler(){var e;(e=this.image,new Promise((t=>{const a=document.createElement("canvas"),r=new Image;r.crossOrigin="anonymous",r.referrerPolicy="no-referrer",r.onload=()=>{a.width=r.naturalWidth,a.height=r.naturalHeight;const e=a.getContext("2d");null==e||e.drawImage(r,0,0),console.log("canvas.width",a.width),console.log("canvas.height",a.height),t(a.toDataURL())},r.src=e}))).then((e=>{this.imageBase64=e}))},immediate:!0},imageBase64(){setTimeout((()=>{this.generateWatermarkUrl()}))},content:"generateWatermarkUrl",textColor:"generateWatermarkUrl",height:"generateWatermarkUrl",width:"generateWatermarkUrl",rotate:"generateWatermarkUrl",gapX:"generateWatermarkUrl",gapY:"generateWatermarkUrl"},mounted(){console.log("slots",this.$slots),setTimeout((()=>{this.generateWatermarkUrl()}))},methods:{styles:t,generateWatermarkUrl(){this.$refs.svgElRef&&(this.revokeWatermarkUrl(),this.watermarkUrl=(e=>{const t=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(t)})(this.$refs.svgElRef.innerHTML))},revokeWatermarkUrl(){this.watermarkUrl&&URL.revokeObjectURL(this.watermarkUrl)}}},[["render",function(e,t,g,m,d,p){return n(),a("div",{class:l(["press-watermark",{"press-watermark--full":e.fullPage}]),style:i(p.computedStyle)},[r("div",{ref:"svgElRef",class:"press-watermark__wrapper"},[e.image&&!e.$slots.content?(n(),a("svg",{key:0,viewBox:`0 0 ${p.svgWidth} ${p.svgHeight}`,width:p.svgWidth,height:p.svgHeight,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",style:i(p.styles({padding:`0 ${e.gapX}px ${e.gapY}px 0`,opacity:e.opacity})),innerHTML:p.imageHtml},null,12,["viewBox","width","height","innerHTML"])):(n(),a("svg",{key:1,viewBox:`0 0 ${p.svgWidth} ${p.svgHeight}`,width:p.svgWidth,height:p.svgHeight,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",style:i(p.styles({padding:`0 ${e.gapX}px ${e.gapY}px 0`,opacity:e.opacity}))},[(n(),a("foreignObject",{x:"0",y:"0",width:e.width,height:e.height},[r("div",{xmlns:"http://www.w3.org/1999/xhtml",style:i(p.rotateStyle)},[s(e.$slots,"content",{},(()=>[r("span",{style:i(`color: ${e.textColor}`)},o(e.content),5)]),!0)],4)],8,["width","height"]))],12,["viewBox","width","height"]))],512)],6)}],["__scopeId","data-v-11719c8b"]])},props:{...u,watermark:{type:String,default:""}},data:()=>({}),mounted(){},methods:{}},[["render",function(e,t,a,r,i,l){const o=d("PressWatermarkWeb");return n(),g(o,{"gap-x":e.gapX,"gap-y":e.gapY,image:e.image,width:e.width,height:e.height,rotate:e.rotate,"z-index":e.zIndex,content:e.content,opacity:e.opacity,"full-page":e.fullPage,"text-color":e.textColor},{content:m((()=>[s(e.$slots,"content")])),_:3},8,["gap-x","gap-y","image","width","height","rotate","z-index","content","opacity","full-page","text-color"])}]]),PressButton:p},data:()=>({fullPage:!1,image:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/press/img/press-ui-full-logo.png",watermark:'<div\n              style="background: linear-gradient(45deg, #000 0, #000 50%, #fff 50%);"\n            >\n              <p style="mix-blend-mode: difference; color: #fff">\n                Press watermark\n              </p>\n            </div>'}),methods:{}},[["render",function(e,t,i,s,l,g){const p=d("PressWatermark"),u=d("demo-block"),w=d("PressButton");return n(),a("div",{class:"demo-wrap"},[h(u,{title:e.t("textWatermark")},{default:m((()=>[r("div",{class:"demo-watermark-wrapper"},[h(p,{content:"Press","full-page":!1})])])),_:1},8,["title"]),h(u,{title:e.t("imageWatermark")},{default:m((()=>[r("div",{class:"demo-watermark-wrapper"},[h(p,{image:l.image,opacity:"0.2","full-page":!1},null,8,["image"])])])),_:1},8,["title"]),h(u,{title:e.t("customGap")},{default:m((()=>[r("div",{class:"demo-watermark-wrapper"},[h(p,{image:l.image,"gap-x":30,"gap-y":10,opacity:"0.2","full-page":!1},null,8,["image"])])])),_:1},8,["title"]),h(u,{title:e.t("customRotate")},{default:m((()=>[r("div",{class:"demo-watermark-wrapper"},[h(p,{image:l.image,rotate:"22",opacity:"0.2","full-page":!1},null,8,["image"])])])),_:1},8,["title"]),h(u,{title:e.t("displayRange")},{default:m((()=>[r("div",{class:"demo-watermark-wrapper"},[h(w,{type:"primary",onClick:t[0]||(t[0]=e=>l.fullPage=!l.fullPage)},{default:m((()=>[c(o(e.t("switch")),1)])),_:1}),h(p,{"full-page":l.fullPage,opacity:"0.2",image:l.image},null,8,["full-page","image"])])])),_:1},8,["title"]),h(u,{title:e.t("htmlWatermark")},{default:m((()=>[r("div",{class:"demo-watermark-wrapper"},[h(p,{width:150,"full-page":!1,watermark:l.watermark},{content:m((()=>[r("div",{style:{background:"linear-gradient(45deg, #000 0, #000 50%, #fff 50%)"}},[r("p",{style:{"mix-blend-mode":"difference",color:"#fff"}}," Press watermark ")])])),_:1},8,["watermark"])])])),_:1},8,["title"])])}],["__scopeId","data-v-383ca292"]]);export{w as default};

import{W as e,U as t,_ as s,x as a,P as i,y as l,A as n,c as o,d,e as r,w as c,q as p,n as u,z as h,r as m,o as f}from"./index-5ToWdtdz.js";import{C as y,d as x,P as g}from"./relation.By8px8q3.js";function C({height:e,duration:t}){return[`height: ${e};`,`transition: height ${t}ms ease-in-out 0ms, top ${t}ms ease-in-out 0ms, -webkit-transform ${t}ms ease-in-out 0ms, transform ${t}ms ease-in-out 0ms;`,"transform-origin: 50% 50% 0px;"].join("")}function b(s,a,i){e(s,".press-collapse-item__content").then((e=>e.height)).then((e=>{!function(e,s,a,i){if(s){if(0===i){const t=0;e.animationStyle=C({height:"auto",duration:t})}else{const t=a?300:1;e.animationStyle=C({height:`${i}px`,duration:t}),setTimeout((()=>{e.animationStyle=C({height:"auto",duration:0})}),t)}return}e.animationStyle=C({height:`${i}px`,duration:1}),t((()=>{e.animationStyle=C({height:0,duration:300})}))}(s,a,i,e)}))}const v=s({name:"PressCollapseItem",options:{...l,styleIsolation:"shared"},components:{PressCell:i},mixins:[y(x)],props:{size:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},border:{type:Boolean,default:!0},isLink:{type:Boolean,default:!0},titleClass:{type:String,default:""},contentClass:{type:String,default:""},...a},emits:[],data(){const{defaultExpandAll:e}=this[x]||{};return{expanded:!!e,animation:{},mounted:!1,animationStyle:e?"height: auto;":"height: 0;"}},computed:{collapseItemClass(){const{disabled:e,expanded:t}=this;return n.bem2("collapse-item__title",{disabled:e,expanded:t})},collapseItemCustomClass(){let e="";return e=this.collapseItemClass,e},wrapperClass:()=>n.bem2("collapse-item__wrapper")},mounted(){this.updateExpanded(),this.mounted=!0},methods:{updateExpanded(){if(!this[x])return;const{value:e,accordion:t}=this[x],{children:s=[]}=this[x],{name:a}=this,i=s.indexOf(this),l=null==a?i:a,n=t?e===l:(e||[]).some((e=>e===l));n!==this.expanded&&b(this,n,this.mounted),this.expanded=n},onClick(){if(this.disabled)return;const{name:e,expanded:t}=this,s=this[x].children.indexOf(this),a=null==e?s:e;this[x].switch(a,!t)}}},[["render",function(e,t,s,a,i,l){const n=m("PressCell");return f(),o("div",{class:p(e.customClass+" press-collapse-item "+(0!==e.index?"press-hairline--top":""))},[d(n,{size:s.size,title:s.title,"title-class":s.titleClass,icon:s.icon,value:s.value,label:s.label,"is-link":s.isLink,clickable:s.clickable,border:s.border&&i.expanded,"custom-class":l.collapseItemCustomClass,"hover-class":"press-cell--hover",center:"",onClick:l.onClick},{title:c((()=>[u(e.$slots,"title",{},void 0,!0)])),"right-icon":c((()=>[u(e.$slots,"right-icon",{},void 0,!0)])),default:c((()=>[u(e.$slots,"value",{},void 0,!0)])),_:3},8,["size","title","title-class","icon","value","label","is-link","clickable","border","custom-class","onClick"]),r("div",{class:p(l.wrapperClass),style:h(i.animationStyle)},[r("div",{class:p(["press-collapse-item__content",s.contentClass])},[u(e.$slots,"default",{},void 0,!0)],2)],6)],2)}],["__scopeId","data-v-3ace332d"]]);const S=s({name:"PressCollapse",options:{...l},mixins:[g(x)],props:{value:{type:[Array,String],default:()=>[]},accordion:{type:Boolean,default:!1},border:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1},...a},watch:{value:{handler(){this.updateExpanded()}},accordion:{handler(){this.updateExpanded()}}},created(){this.children=[]},methods:{updateExpanded(){this.children.forEach((e=>{e.updateExpanded()}))},switch(e,t){const{accordion:s,value:a}=this,i=e;e=s?t?e:"":t?(a||[]).concat(e):(a||[]).filter((t=>t!==e)),t?this.$emit("open",i):this.$emit("close",i),this.$emit("change",e),this.$emit("input",e)}}},[["render",function(e,t,s,a,i,l){return f(),o("div",{class:p(e.customClass+" press-collapse "+(s.border?"press-hairline--top-bottom":""))},[u(e.$slots,"default")],2)}]]);export{v as P,S as a};

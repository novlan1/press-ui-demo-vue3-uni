import{Y as t,_ as e,x as s,C as a,P as i,z as l,an as n,E as o,u as d,c as r,d as c,e as p,w as u,B as h,q as m,n as f,r as y,o as g,y as x}from"./index-BQ3tkeW1.js";import{a as C}from"./rect.0sGwsiPM.js";function b({height:t,duration:e}){return[`height: ${t};`,`transition: height ${e}ms ease-in-out 0ms, top ${e}ms ease-in-out 0ms, -webkit-transform ${e}ms ease-in-out 0ms, transform ${e}ms ease-in-out 0ms;`,"transform-origin: 50% 50% 0px;"].join("")}function S(e,s,a){C(e,".press-collapse-item__content").then((t=>t.height)).then((i=>{!function(e,s,a,i){if(s){if(0===i){const t=0;e.animationStyle=b({height:"auto",duration:t})}else{const t=a?300:1;e.animationStyle=b({height:`${i}px`,duration:t}),setTimeout((()=>{e.animationStyle=b({height:"auto",duration:0})}),t)}return}e.animationStyle=b({height:`${i}px`,duration:1}),t((()=>{e.animationStyle=b({height:0,duration:300})}))}(e,s,a,i)}))}const v=e({name:"PressCollapseItem",options:{...l,styleIsolation:"shared"},components:{PressCell:i},mixins:[a(n)],props:{size:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},border:{type:Boolean,default:!0},isLink:{type:Boolean,default:!0},titleClass:{type:String,default:""},titleStyle:{type:[String,Object],default:""},contentStyle:{type:[String,Object],default:""},contentClass:{type:String,default:""},...s},emits:[],data(){const{defaultExpandAll:t}=this[n]||{};return{expanded:!!t,animation:{},mounted:!1,animationStyle:t?"height: auto;":"height: 0;"}},computed:{collapseItemClass(){const{disabled:t,expanded:e}=this;return o.bem2("collapse-item__title",{disabled:t,expanded:e})},collapseItemCustomClass(){let t="";return t=this.collapseItemClass,t},collapseItemContentStyle(){return d(this.contentStyle)},wrapperClass:()=>o.bem2("collapse-item__wrapper")},mounted(){this.updateExpanded(),this.mounted=!0},methods:{updateExpanded(){if(!this[n])return;const{value:t,accordion:e}=this[n],{children:s=[]}=this[n],{name:a}=this,i=s.indexOf(this),l=null==a?i:a,o=e?t===l:(t||[]).some((t=>t===l));o!==this.expanded&&S(this,o,this.mounted),this.expanded=o},onClick(){if(this.disabled)return;const{name:t,expanded:e}=this,s=this[n].children.indexOf(this),a=null==t?s:t;this[n].switch(a,!e)}}},[["render",function(t,e,s,a,i,l){const n=y("PressCell");return g(),r("div",{class:m(t.customClass+" press-collapse-item "+(0!==t.index?"press-hairline--top":""))},[c(n,{size:s.size,title:s.title,"title-class":s.titleClass,icon:s.icon,value:s.value,label:s.label,"is-link":s.isLink,clickable:s.clickable,border:s.border&&i.expanded,"custom-class":l.collapseItemCustomClass,"custom-style":s.titleStyle,"hover-class":"press-cell--hover",center:"",onClick:l.onClick},{title:u((()=>[f(t.$slots,"title",{},void 0,!0)])),"right-icon":u((()=>[f(t.$slots,"right-icon",{},void 0,!0)])),default:u((()=>[f(t.$slots,"value",{},void 0,!0)])),_:3},8,["size","title","title-class","icon","value","label","is-link","clickable","border","custom-class","custom-style","onClick"]),p("div",{class:m(l.wrapperClass),style:h(i.animationStyle)},[p("div",{class:m(["press-collapse-item__content",s.contentClass]),style:h(l.collapseItemContentStyle)},[f(t.$slots,"default",{},void 0,!0)],6)],6)],2)}],["__scopeId","data-v-83952160"]]);const $=e({name:"PressCollapse",options:{...l},mixins:[x(n)],props:{value:{type:[Array,String],default:()=>[]},accordion:{type:Boolean,default:!1},border:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1},...s},watch:{value:{handler(){this.updateExpanded()}},accordion:{handler(){this.updateExpanded()}}},created(){this.children=[]},methods:{updateExpanded(){this.children.forEach((t=>{t.updateExpanded()}))},switch(t,e){const{accordion:s,value:a}=this,i=t;t=s?e?t:"":e?(a||[]).concat(t):(a||[]).filter((e=>e!==t)),e?this.$emit("open",i):this.$emit("close",i),this.$emit("change",t),this.$emit("input",t)}}},[["render",function(t,e,s,a,i,l){return g(),r("div",{class:m(t.customClass+" press-collapse "+(s.border?"press-hairline--top-bottom":""))},[f(t.$slots,"default")],2)}]]);export{v as P,$ as a};

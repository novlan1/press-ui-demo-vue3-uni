import{_ as e,x as t,Q as s,ag as a,ah as o,h as n,y as l,aX as i,B as r,u as c,A as d,c as u,d as p,w as m,r as g,o as h,k as y,n as f,q as C,F as S,j as B,t as v,e as w,g as k,ax as b,az as O}from"./index-dUtMVM0l.js";import{a as x,b as T}from"./index.BJbDC44W.js";import{a as _}from"./handler-helper.DSmWJMfl.js";import{G as P,R as j}from"./color.IIFrEASq.js";import{P as A}from"./press-popup-plus.Cnxd6WOD.js";const I={show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},useSlot:Boolean,useTitleSlot:Boolean,className:{type:String,default:""},customStyle:{type:[String,Object],default:""},asyncClose:Boolean,beforeClose:{type:[null,Function],default:null},theme:{type:String,default:"default"},messageAlign:{type:String,default:""},width:{type:[String,Number],default:""},zIndex:{type:Number,default:2e3},overlay:{type:Boolean,default:!0},overlayStyle:{type:String,default:""},transition:{type:String,default:"scale"},showConfirmButton:{type:Boolean,default:!0},showCancelButton:Boolean,confirmButtonText:{type:String,default:s("confirm")},cancelButtonText:{type:String,default:s("cancel")},confirmButtonColor:{type:String,default:j},cancelButtonColor:{type:String,default:P},closeOnClickOverlay:Boolean,confirmButtonOpenType:{type:String,default:""},...t};const M=e({name:"PressDialogPlus",options:{...l,styleIsolation:"shared"},components:{PressPopup:A,PressButton:n},mixins:[a,o(I)],props:I,emits:["close","confirm","cancel"],data:()=>({utils:d,loading:{confirm:!1,cancel:!1},callback:()=>{}}),computed:{popupCustomStyle(){return c([{width:d.addUnit(this.dataWidth)},this.dataCustomStyle])}},watch:{dataShow:{handler(e){e||this.stopLoading()}}},methods:{onConfirm(){this.handleAction("confirm")},onCancel(){this.handleAction("cancel")},onClickOverlay(){this.close("overlay")},close(e){this.dataShow=!1,r((()=>{this.$emit("close",e);const{callback:t}=this;t&&t(e,this)}))},stopLoading(){this.loading.confirm=!1,this.loading.cancel=!1},handleAction(e){this.$emit(e,{dialog:this});const{dataAsyncClose:t,dataBeforeClose:s}=this;t||s?(this.loading[e]=!0,s&&i(s(e)).then((t=>{t?this.close(e):this.stopLoading()}))):this.close(e)}}},[["render",function(e,t,s,a,o,n){const l=g("PressButton"),i=g("PressPopup");return h(),u("div",{class:"press-dialog-index"},[p(i,{show:e.dataShow,"z-index":e.dataZIndex,overlay:e.dataOverlay,transition:e.dataTransition,"custom-class":"press-dialog press-dialog--"+e.dataTheme+" "+e.dataClassName,"custom-style":n.popupCustomStyle,"overlay-style":e.dataOverlayStyle,"close-on-click-overlay":e.dataCloseOnClickOverlay,onClose:n.onClickOverlay},{default:m((()=>[e.dataTitle||e.dataUseTitleSlot?(h(),u("div",{key:0,class:C(o.utils.bem2("dialog__header",{isolated:!(e.dataMessage||e.dataUseSlot)}))},[e.dataUseTitleSlot?f(e.$slots,"title",{key:0},void 0,!0):e.dataTitle?(h(),u(S,{key:1},[B(v(e.dataTitle),1)],64)):y("",!0)],2)):y("",!0),e.dataUseSlot?f(e.$slots,"default",{key:1},void 0,!0):e.dataMessage?(h(),u("div",{key:2,class:C(o.utils.bem2("dialog__message",[e.dataTheme,e.dataMessageAlign,{hasTitle:e.dataTitle}]))},[w("span",{class:"press-dialog__message-text"},v(e.dataMessage),1)],2)):y("",!0),(h(),u("div",{key:3,class:"press-hairline--top press-dialog__footer"},[e.dataShowCancelButton?(h(),k(l,{key:0,size:"large",loading:o.loading.cancel,class:"press-dialog__button press-hairline--right","custom-class":"press-dialog__cancel","custom-style":"color: "+e.dataCancelButtonColor,onClick:n.onCancel},{default:m((()=>[B(v(e.dataCancelButtonText),1)])),_:1},8,["loading","custom-style","onClick"])):y("",!0),e.dataShowConfirmButton?(h(),k(l,{key:1,size:"large",class:"press-dialog__button",loading:o.loading.confirm,"custom-class":"press-dialog__confirm","custom-style":"color: "+e.dataConfirmButtonColor,"open-type":e.dataConfirmButtonOpenType,lang:e.lang,"business-id":e.businessId,"session-from":e.sessionFrom,"send-message-title":e.sendMessageTitle,"send-message-path":e.sendMessagePath,"send-message-img":e.sendMessageImg,"show-message-card":e.showMessageCard,"app-parameter":e.appParameter,onClick:n.onConfirm,onGetuserinfo:e.onGetUserInfo,onContact:e.onContact,onGetphonenumber:e.onGetPhoneNumber,onError:e.onError,onLaunchapp:e.onLaunchApp,onOpensetting:e.onOpenSetting},{default:m((()=>[B(v(e.dataConfirmButtonText),1)])),_:1},8,["loading","custom-style","open-type","lang","business-id","session-from","send-message-title","send-message-path","send-message-img","show-message-card","app-parameter","onClick","onGetuserinfo","onContact","onGetphonenumber","onError","onLaunchapp","onOpensetting"])):y("",!0)]))])),_:3},8,["show","z-index","overlay","transition","custom-class","custom-style","overlay-style","close-on-click-overlay","onClose"])])}],["__scopeId","data-v-796a1a2e"]]);let z=[];const G={selector:"#press-dialog",show:!1,title:"",message:"",className:"",customStyle:"",asyncClose:!1,beforeClose:null,theme:"default",messageAlign:"",width:null,zIndex:100,overlay:!0,overlayStyle:"",transition:"scale",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),closeOnClickOverlay:!1,confirmButtonOpenType:""};let L=Object.assign({},G);const N=e=>(e=Object.assign(Object.assign({},L),e),new Promise(((t,s)=>{const a=e.context||function(){const e=O();return e[e.length-1]}();let o=x(a,e.selector);if(delete e.context,delete e.selector,o||(o=b(M,"press-dialog")),o){const a=(e,a)=>{"confirm"===e?t(a):s(a)},n={...e};T(o,n),o.callback=a,o.$vm&&(o.$vm.callback=a),r((()=>{T(o,{show:!0})})),z.push(o)}else console.warn("The press-dialog node is not found, please confirm whether the selector and context are correct")})));_({Dialog:N,queue:z,currentOptions:L,defaultOptions:G,updateQueue:function(e){z=e},updateCurrentOptions:function(e){L=e}});const U=N.alert,$=N.confirm;export{N as D,M as P,$ as a,U as s};

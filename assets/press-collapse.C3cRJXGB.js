import{Y as e,_ as t,x as s,C as a,P as i,z as l,an as n,E as o,c as d,d as r,e as c,w as p,q as u,n as h,B as m,r as f,o as y,y as x}from"./index-Ca5qPapH.js";import{a as g}from"./rect.NULosufi.js";function C({height:e,duration:t}){return[`height: ${e};`,`transition: height ${t}ms ease-in-out 0ms, top ${t}ms ease-in-out 0ms, -webkit-transform ${t}ms ease-in-out 0ms, transform ${t}ms ease-in-out 0ms;`,"transform-origin: 50% 50% 0px;"].join("")}function b(t,s,a){g(t,".press-collapse-item__content").then((e=>e.height)).then((i=>{!function(t,s,a,i){if(s){if(0===i){const e=0;t.animationStyle=C({height:"auto",duration:e})}else{const e=a?300:1;t.animationStyle=C({height:`${i}px`,duration:e}),setTimeout((()=>{t.animationStyle=C({height:"auto",duration:0})}),e)}return}t.animationStyle=C({height:`${i}px`,duration:1}),e((()=>{t.animationStyle=C({height:0,duration:300})}))}(t,s,a,i)}))}const v=t({name:"PressCollapseItem",options:{...l,styleIsolation:"shared"},components:{PressCell:i},mixins:[a(n)],props:{size:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},border:{type:Boolean,default:!0},isLink:{type:Boolean,default:!0},titleClass:{type:String,default:""},contentClass:{type:String,default:""},...s},emits:[],data(){const{defaultExpandAll:e}=this[n]||{};return{expanded:!!e,animation:{},mounted:!1,animationStyle:e?"height: auto;":"height: 0;"}},computed:{collapseItemClass(){const{disabled:e,expanded:t}=this;return o.bem2("collapse-item__title",{disabled:e,expanded:t})},collapseItemCustomClass(){let e="";return e=this.collapseItemClass,e},wrapperClass:()=>o.bem2("collapse-item__wrapper")},mounted(){this.updateExpanded(),this.mounted=!0},methods:{updateExpanded(){if(!this[n])return;const{value:e,accordion:t}=this[n],{children:s=[]}=this[n],{name:a}=this,i=s.indexOf(this),l=null==a?i:a,o=t?e===l:(e||[]).some((e=>e===l));o!==this.expanded&&b(this,o,this.mounted),this.expanded=o},onClick(){if(this.disabled)return;const{name:e,expanded:t}=this,s=this[n].children.indexOf(this),a=null==e?s:e;this[n].switch(a,!t)}}},[["render",function(e,t,s,a,i,l){const n=f("PressCell");return y(),d("div",{class:u(e.customClass+" press-collapse-item "+(0!==e.index?"press-hairline--top":""))},[r(n,{size:s.size,title:s.title,"title-class":s.titleClass,icon:s.icon,value:s.value,label:s.label,"is-link":s.isLink,clickable:s.clickable,border:s.border&&i.expanded,"custom-class":l.collapseItemCustomClass,"hover-class":"press-cell--hover",center:"",onClick:l.onClick},{title:p((()=>[h(e.$slots,"title",{},void 0,!0)])),"right-icon":p((()=>[h(e.$slots,"right-icon",{},void 0,!0)])),default:p((()=>[h(e.$slots,"value",{},void 0,!0)])),_:3},8,["size","title","title-class","icon","value","label","is-link","clickable","border","custom-class","onClick"]),c("div",{class:u(l.wrapperClass),style:m(i.animationStyle)},[c("div",{class:u(["press-collapse-item__content",s.contentClass])},[h(e.$slots,"default",{},void 0,!0)],2)],6)],2)}],["__scopeId","data-v-d510ace3"]]);const S=t({name:"PressCollapse",options:{...l},mixins:[x(n)],props:{value:{type:[Array,String],default:()=>[]},accordion:{type:Boolean,default:!1},border:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1},...s},watch:{value:{handler(){this.updateExpanded()}},accordion:{handler(){this.updateExpanded()}}},created(){this.children=[]},methods:{updateExpanded(){this.children.forEach((e=>{e.updateExpanded()}))},switch(e,t){const{accordion:s,value:a}=this,i=e;e=s?t?e:"":t?(a||[]).concat(e):(a||[]).filter((t=>t!==e)),t?this.$emit("open",i):this.$emit("close",i),this.$emit("change",e),this.$emit("input",e)}}},[["render",function(e,t,s,a,i,l){return y(),d("div",{class:u(e.customClass+" press-collapse "+(s.border?"press-hairline--top-bottom":""))},[h(e.$slots,"default")],2)}]]);export{v as P,S as a};

import{ax as e,az as t,Q as o,_ as a,ah as n,h as s,C as i,aX as l,c as r,k as c,e as d,g as u,t as m,E as h,F as p,d as g,w as f,z as C,q as y,S as w,r as v,o as k,j as S}from"./index-5ToWdtdz.js";import{a as x,b as _}from"./index.GcP5Wbr0.js";import{a as T}from"./handler-helper.DSmWJMfl.js";import{S as L}from"./scroll-view.Du4WPn9c.js";import{P as I}from"./press-field.C2cHpT9n.js";function P({options:o,currentOptions:a,dialogComponent:n,id:s}){const i=(o=Object.assign(Object.assign({},a),o)).context||function(){const e=t();return e[e.length-1]}();let l=x(i,o.selector);if(delete o.context,delete o.selector,!l&&n&&(l=e(n,s)),l){const e={...o};_(l,e);return _(l,e,"showDialog").then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e)))}const r=`The ${o.selector} node is not found, please confirm whether the selector and context are correct`;return console.warn(r),Promise.reject(r)}const O={show:{type:Boolean,default:!1},src:{type:String,default:""},dialogType:{type:[Number,String],default:1},title:{type:String,default:o("dialog.title")},content:{type:String,default:""},canTouchRemove:{type:Boolean,default:!0},confirmText:{type:String,default:o("confirm")},cancelText:{type:String,default:""},onClickCancel:{type:[Function,null],default:null},onConfirmClick:{type:[Function,null],default:null},htmlContent:{type:String,default:""},zIndex:{type:[Number,String],default:"99"},useScrollView:{type:Boolean,default:!1},onClickImage:{type:[Function,null],default:null},onLongPressImage:{type:[Function,null],default:null},showField:{type:Boolean,default:!1},fieldPlaceHolder:{type:String,default:""},fieldValue:{type:String,default:""},customClass:{type:String,default:""}};const j=a({name:"PressDialog",options:{...i(!0,!1),styleIsolation:"shared"},components:{PressButton:s,PressField:I},mixins:[n(O),L],props:{...O},emits:["confirm","cancel","onLongPressImage","onClickImage"],data:()=>({resolve:"",reject:"",promise:"",mShowButtonLoading:!1,inputValue:""}),watch:{dataFieldValue:{handler(e){this.inputValue=e},immediate:!0}},mounted(){},methods:{preventTouchMove(){},confirm(){if(2===this.dataDialogType){if(this.mShowButtonLoading)return;this.mShowButtonLoading=!0}"function"==typeof this.dataOnConfirmClick?l(this.dataOnConfirmClick(this)).then((e=>{e&&this.resolveConfirm()})).catch((()=>{})):this.resolveConfirm()},resolveConfirm(){this.resolve&&this.resolve("confirm"),this.$emit("confirm"),this.remove()},cancel(){"function"==typeof this.dataOnClickCancel&&this.dataOnClickCancel(this),"function"==typeof this.reject&&this.reject("cancel"),this.$emit("cancel"),this.remove()},showDialog(){return this.dataShow=!0,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),this.promise},touchRemove(){this.dataCanTouchRemove&&this.remove(),this.$emit("cancel")},remove(){this.dataShow=!1,this.mShowButtonLoading=!1},destroy(){},handleLongPressImage(){"function"==typeof this.dataOnLongPressImage&&this.dataOnLongPressImage(),this.$emit("onLongPressImage")},handleClickImage(){"function"==typeof this.dataOnClickImage&&this.dataOnClickImage(),this.$emit("onClickImage")},onChangeField(e){this.inputValue=e}}},[["render",function(e,t,o,a,n,s){const i=w,l=v("PressField"),x=v("PressButton");return e.dataShow?(k(),r("div",{key:0,class:y(["press-dialog",e.dataCustomClass]),style:C({zIndex:`${e.dataZIndex}`}),onClick:t[2]||(t[2]=h(((...e)=>s.touchRemove&&s.touchRemove(...e)),["stop"])),onTouchmove:t[3]||(t[3]=h(((...e)=>s.preventTouchMove&&s.preventTouchMove(...e)),["stop"]))},[d("div",{class:"press-dialog__content-wrap"},[d("p",{class:"press-dialog__title"},m(e.dataTitle),1),e.dataUseScrollView&&e.dataHtmlContent?(k(),u(i,{key:0,"scroll-y":"true",class:"press-dialog__content",innerHTML:e.dataHtmlContent},null,8,["innerHTML"])):e.dataHtmlContent?(k(),r("p",{key:1,class:"press-dialog__content",innerHTML:e.dataHtmlContent},null,8,["innerHTML"])):c("",!0),e.dataHtmlContent?c("",!0):(k(),r("p",{key:2,class:"press-dialog__content"},m(e.dataContent),1)),e.dataShowField?(k(),u(l,{key:3,"custom-class":"press-dialog__field","title-width":"0",placeholder:e.dataFieldPlaceHolder,value:e.dataFieldValue,"model-value":e.dataFieldValue,onChange:s.onChangeField},null,8,["placeholder","value","model-value","onChange"])):c("",!0),e.dataSrc?(k(),r("div",{key:4,class:"press-dialog__img-wrap"},[e.dataSrc?(k(),r("img",{key:0,class:"press-dialog__img","show-menu-by-longpress":!0,src:e.dataSrc,onClick:t[0]||(t[0]=h(((...e)=>s.handleClickImage&&s.handleClickImage(...e)),["stop"])),onLongpress:t[1]||(t[1]=(...e)=>s.handleLongPressImage&&s.handleLongPressImage(...e))},null,40,["src"])):c("",!0)])):c("",!0),d("div",{class:"press-dialog__btn--wrap"},[e.dataCancelText&&e.dataCancelText.length>0?(k(),r(p,{key:0},[d("div",{class:"press-dialog__btn--spacing"},[g(x,{type:"e-sport-secondary","custom-style":"width: 100px;height: 36px;",onClick:s.cancel},{default:f((()=>[S(m(e.dataCancelText),1)])),_:1},8,["onClick"])]),g(x,{type:"e-sport-primary-bg",loading:n.mShowButtonLoading,"custom-style":"width: 100px;height: 36px;",onClick:s.confirm},{default:f((()=>[S(m(n.mShowButtonLoading?"":e.dataConfirmText),1)])),_:1},8,["loading","onClick"])],64)):e.dataConfirmText||n.mShowButtonLoading?(k(),u(x,{key:1,type:"e-sport-primary-bg",loading:n.mShowButtonLoading,"custom-style":"width: 148px;height: 36px;",onClick:s.confirm},{default:f((()=>[S(m(n.mShowButtonLoading?"":e.dataConfirmText),1)])),_:1},8,["loading","onClick"])):c("",!0)])])],38)):c("",!0)}],["__scopeId","data-v-a382e954"]]);let F=[];const B=Object.keys(O).reduce(((e,t)=>(e[t]=O[t].default,e)),{selector:"#tip-match-comm-tips-dialog"});let b=Object.assign({},B);const H=e=>P({options:e,currentOptions:b,id:"tip-dialog-showCommTipsDialog",dialogComponent:j});H.show=e=>H(e),T({Dialog:H,queue:F,currentOptions:b,defaultOptions:B,updateQueue:function(e){F=e},updateCurrentOptions:function(e){b=e}});const V=H.show;export{H as D,j as P,V as s};

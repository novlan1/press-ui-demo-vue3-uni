import{_ as e,c as t,e as a,o as s,V as o,x as r,ac as n,z as c,E as l,g as i,w as d,r as u,q as m,k as h,J as p,j as b,t as k,d as f,F as y,f as _,I as C}from"./index-_6p3YC47.js";import{P as g}from"./press-popup.YJUIKGQd.js";const B=e({name:"PressNumberKeyboard",options:{...c,styleIsolation:"shared"},components:{PressPopup:g,PressIconDelete:e({name:"PressIconDelete"},[["render",function(e,o,r,n,c,l){return s(),t("svg",{class:"press-number-keyboard__delete-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 22"},[a("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"})])}],["__scopeId","data-v-d0c5dcba"]])},mixins:[n],props:{...r,mode:{type:String,default:"number"},show:{type:Boolean,default:!1},toolbar:{type:Boolean,default:!1},cancelButtonText:{type:String,default:""},confirmButtonText:{type:String,default:o("confirm")},title:{type:String,default:""},decimalMark:{type:String,default:"."},random:{type:Boolean,default:!1},maxLength:{type:Number,default:-1},zIndex:{type:Number,default:100},round:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0}},emits:["change","backspace","close","cancel","confirm","update:modelValue"],data:()=>({timer:null,refreshKeyOrder:1}),computed:{roundComputed(){return this.round||this.toolbar},keys(){let e;switch(this.mode){case"number":e=[1,2,3,4,5,6,7,8,9,0];break;case"accounting":e=[1,2,3,4,5,6,7,8,9,0,this.decimalMark];break;case"card":e=[1,2,3,4,5,6,7,8,9,"X",0];break;default:e=[]}return this.refreshKeyOrder,this.random&&(e=this.shuffleArray(e)),e},wrapClass(){return l.bem2("number-keyboard",{safe:this.safeAreaInsetBottom})},padClass(){return l.bem2("number-keyboard__pad",this.mode)}},watch:{show(e){this.random&&e&&(this.refreshKeyOrder=1===this.refreshKeyOrder?2:1)}},mounted(){},beforeDestroy(){},methods:{shuffleArray(e){const t=e;for(let a=t.length-1;a>0;a--){const e=Math.floor(Math.random()*(a+1)),s=t[a];t[a]=t[e],t[e]=s}return t},getButtonClass(e,t){const a=[e];switch(this.mode){case"number":t===this.keys.length-1&&a.push("wide");break;case"accounting":["backspace","confirm"].includes(e)?a.push("place-right"):t===this.keys.length-2&&a.push("wide")}return l.bem2("number-keyboard__button",a)},onKeyboardClick(e){this.maxLength>=0&&this.realModelValue.length>=this.maxLength||(this.emitModelValue(this.realModelValue+e),this.$emit("change",e))},onBackspaceStart(){this.onBackspaceEnd(),this.onBackspaceClick(),this.timer=setInterval((()=>{this.onBackspaceClick()}),250)},onBackspaceEnd(){clearInterval(this.timer),this.timer=null},onBackspaceClick(){this.$emit("backspace"),this.emitModelValue(this.realModelValue.slice(0,this.realModelValue.length-1))},onClose(){this.$emit("close")},onActionClick(e){const{action:t}=e.currentTarget.dataset;this.$emit(t)}}},[["render",function(e,o,r,n,c,l){const g=p,B=u("PressIconDelete"),v=u("PressPopup");return s(),i(v,{show:r.show,"z-index":r.zIndex,position:"bottom",round:l.roundComputed,"overlay-style":"background-color: transparent;","safe-area-inset-bottom":!1,onClose:l.onClose},{default:d((()=>[a("div",{class:m(l.wrapClass)},[r.toolbar?(s(),t("div",{key:0,class:"press-number-keyboard__toolbar"},[r.cancelButtonText?(s(),i(g,{key:0,class:"press-number-keyboard__cancel","hover-class":"press-number-keyboard__cancel--hover","data-action":"cancel",onClick:l.onActionClick},{default:d((()=>[b(k(r.cancelButtonText),1)])),_:1},8,["onClick"])):h("",!0),a("div",{class:"press-number-keyboard__title"},k(r.title),1),r.confirmButtonText?(s(),i(g,{key:1,class:"press-number-keyboard__confirm","hover-class":"press-number-keyboard__confirm--hover","data-action":"confirm",onClick:l.onActionClick},{default:d((()=>[b(k(r.confirmButtonText),1)])),_:1},8,["onClick"])):h("",!0)])):h("",!0),a("div",{class:m(l.padClass)},[(s(!0),t(y,null,_(l.keys,((e,t)=>(s(),i(g,{key:e,class:m(l.getButtonClass(e,t)),"hover-class":"press-number-keyboard__button--hover",onClick:t=>l.onKeyboardClick(e)},{default:d((()=>[b(k(e),1)])),_:2},1032,["class","onClick"])))),128)),f(g,{class:m(l.getButtonClass("backspace")),"hover-class":"press-number-keyboard__button--hover",onTouchstart:C(l.onBackspaceStart,["stop"]),onTouchend:l.onBackspaceEnd},{default:d((()=>[f(B,{class:"press-number-keyboard__delete-icon"})])),_:1},8,["class","onTouchstart","onTouchend"]),"accounting"===r.mode?(s(),i(g,{key:0,class:m(l.getButtonClass("confirm")),"hover-class":"press-number-keyboard__button--confirm-hover","data-action":"confirm",onClick:l.onActionClick},{default:d((()=>[b(k(r.confirmButtonText),1)])),_:1},8,["class","onClick"])):h("",!0)],2)],2)])),_:1},8,["show","z-index","round","onClose"])}],["__scopeId","data-v-f3be1c8d"]]);export{B as P};

import{_ as t,u as e,v as r,E as s,c as l,e as i,F as a,f as o,q as n,B as u,o as d,t as m,r as g,g as h,h as p,d as c,w as f,j as y}from"./index-FKy9t0sq.js";import{P as x,a as T}from"./press-grid.CFn_1xif.js";import{b}from"./utils.Dhb3cRfl.js";const S={name:"PressRollingTextItem",options:{styleIsolation:"shared"},props:{customClass:{type:String,default:""},direction:{type:String,default:"down"},figureArr:{type:Array,default:()=>[]},height:{type:Number,default:40},delay:{type:Number,default:0},isStart:{type:Boolean,default:!1},duration:{type:Number,default:2}},data:()=>({utils:s}),computed:{newFigureArr(){return"down"===this.direction?this.figureArr.slice().reverse():this.figureArr},translatePx(){return`-${this.height*(this.figureArr.length-1)}px`},itemStyle(){return e({lineHeight:r(this.height)})},rootStyle(){return e({height:r(this.height),"--press-translate":this.translatePx,"--press-duration":`${this.duration}s`,"--press-delay":`${this.delay}s`})}},mounted(){},methods:{}};const C={name:"PressRollingText",options:{styleIsolation:"shared"},components:{PressRollingTextItem:t(S,[["render",function(t,e,r,s,g,h){return d(),l("div",{class:n([g.utils.bem2("rolling-text-item",[r.direction]),r.customClass]),style:u(h.rootStyle)},[i("div",{class:n(g.utils.bem2("rolling-text-item__box",{animate:r.isStart}))},[(d(!0),l(a,null,o(h.newFigureArr,((t,e)=>(d(),l("div",{key:e,class:n([g.utils.bem2("rolling-text-item__item",{last:e===h.newFigureArr.length-1})]),style:u(h.itemStyle)},m(t),7)))),128))],2)],6)}],["__scopeId","data-v-d29f1ad7"]])},props:{customClass:{type:String,default:""},itemCustomClass:{type:String,default:""},startNum:{type:Number,default:0},targetNum:{type:Number,default:0},textList:{type:Array,default:()=>[]},duration:{type:Number,default:2},direction:{type:String,default:"down"},autoStart:{type:Boolean,default:!0},stopOrder:{type:String,default:"ltr"},height:{type:Number,default:40}},data(){return{rolling:this.autoStart}},computed:{isCustomType(){return Array.isArray(this.textList)&&this.textList.length},itemLength(){return this.isCustomType?this.textList[0].length:`${Math.max(this.startNum,this.targetNum)}`.length},targetNumArr(){return this.isCustomType?new Array(this.itemLength).fill(""):b(this.targetNum,this.itemLength).split("")},startNumArr(){return b(this.startNum,this.itemLength).split("")}},watch:{autoStart:{handler(t){t&&this.start()}}},mounted(){},methods:{getTextArrByIdx(t){const e=[];for(let r=0;r<this.textList.length;r++)e.push(this.textList[r][t]);return e},getFigureArr(t){const e=+this.startNumArr[t],r=+this.targetNumArr[t],s=[];for(let l=e;l<=9;l++)s.push(l);for(let l=0;l<=2;l++)for(let t=0;t<=9;t++)s.push(t);for(let l=0;l<=r;l++)s.push(l);return s},getDelay(t,e){return"ltr"===this.stopOrder?.2*t:.2*(e-1-t)},start(){this.rolling=!0},reset(){this.rolling=!1,this.autoStart&&setTimeout((()=>{this.start()}),300)}}};const N=["aaaaa","bbbbb","ccccc","ddddd","eeeee","fffff","ggggg"];const _=t({i18n:{"zh-CN":{direction:"设置翻滚方向",stopOrder:"设置各数位停止顺序",rollDown:"向下翻滚",rollUp:"向上翻滚",stopFrom:"从个位停止",manualControl:"手动控制",customStyle:"自定义样式",noNumberType:"翻转非数字内容",start:"开始",reset:"重置"},"en-US":{direction:"Set Rolling Direction",stopOrder:"Set Stop Order",rollDown:"Roll Down",rollUp:"Roll Up",stopFrom:"Right Side Stop First",manualControl:"Manual Control",customStyle:"Custom Style",noNumberType:"Roll Non-numeric Text",start:"Start",reset:"Reset"}},components:{PressRollingText:t(C,[["render",function(t,e,r,s,i,u){const m=g("PressRollingTextItem");return d(),l("div",{class:n(["press-rolling-text",r.customClass])},[(d(!0),l(a,null,o(u.targetNumArr,((t,e)=>(d(),h(m,{key:e,"figure-arr":u.isCustomType?u.getTextArrByIdx(e):u.getFigureArr(e),duration:r.duration,direction:r.direction,"is-start":i.rolling,height:r.height,delay:u.getDelay(e,u.itemLength),"custom-class":r.itemCustomClass},null,8,["figure-arr","duration","direction","is-start","height","delay","custom-class"])))),128))],2)}],["__scopeId","data-v-1179e200"]]),PressButton:p,PressGrid:T,PressGridItem:x},data:()=>({textList:N}),methods:{startRoll(t){this.$refs[t].reset(),setTimeout((()=>{this.$refs[t].start()}))},start(){this.$refs.rollingText6.start()},reset(){this.$refs.rollingText6.reset()}}},[["render",function(t,e,r,s,a,o){const n=g("PressRollingText"),u=g("PressButton"),h=g("demo-block"),p=g("PressGridItem"),x=g("PressGrid");return d(),l("div",{class:"demo-wrap"},[c(h,{title:t.t("basicUsage")},{default:f((()=>[c(n,{ref:"rollingText","start-num":0,"target-num":123,"auto-start":!1},null,512),i("div",{class:"button-wrap"},[c(u,{type:"primary",size:"small",onClick:e[0]||(e[0]=t=>o.startRoll("rollingText"))},{default:f((()=>[y(m(t.t("rollDown")),1)])),_:1})])])),_:1},8,["title"]),c(h,{title:t.t("direction")},{default:f((()=>[c(n,{ref:"rollingText2","start-num":0,"target-num":432,direction:"up","auto-start":!1},null,512),i("div",{class:"button-wrap"},[c(u,{type:"primary",size:"small",onClick:e[1]||(e[1]=t=>o.startRoll("rollingText2"))},{default:f((()=>[y(m(t.t("rollUp")),1)])),_:1})])])),_:1},8,["title"]),c(h,{title:t.t("stopOrder")},{default:f((()=>[c(n,{ref:"rollingText3","start-num":0,"target-num":54321,"auto-start":!1,"stop-order":"rtl"},null,512),i("div",{class:"button-wrap"},[c(u,{type:"primary",size:"small",onClick:e[2]||(e[2]=t=>o.startRoll("rollingText3"))},{default:f((()=>[y(m(t.t("stopFrom")),1)])),_:1})])])),_:1},8,["title"]),c(h,{title:t.t("noNumberType")},{default:f((()=>[c(n,{ref:"rollingText4","text-list":a.textList,"auto-start":!1,duration:1},null,8,["text-list"]),i("div",{class:"button-wrap"},[c(u,{type:"primary",size:"small",onClick:e[3]||(e[3]=t=>o.startRoll("rollingText4"))},{default:f((()=>[y(m(t.t("start")),1)])),_:1})])])),_:1},8,["title"]),c(h,{title:t.t("customStyle")},{default:f((()=>[c(n,{ref:"rollingText5","custom-class":"my-rolling-text",height:54,"start-num":12345,"target-num":54321},null,512)])),_:1},8,["title"]),c(h,{title:t.t("manualControl")},{default:f((()=>[c(n,{ref:"rollingText6",height:54,"custom-class":"my-rolling-text","start-num":0,"target-num":54321,"auto-start":!1},null,512)])),_:1},8,["title"]),c(x,{clickable:"","custom-class":"grid-wrap","column-num":2},{default:f((()=>[c(p,{text:t.t("start"),icon:"play-circle-o",onClick:o.start},null,8,["text","onClick"]),c(p,{text:t.t("reset"),icon:"replay",onClick:o.reset},null,8,["text","onClick"])])),_:1})])}],["__scopeId","data-v-f22e7ebf"]]);export{_ as default};

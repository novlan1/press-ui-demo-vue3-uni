import{aA as t,ap as e,V as o,_ as n,aq as i,W as a,h as l,H as s,a$ as c,c as r,k as d,e as h,g as m,t as u,I as p,F as g,d as f,w as C,B as y,q as w,S as T,r as k,o as v,j as S,P as L,f as x}from"./index-BfO-sNMx.js";import{a as P,b as _}from"./index.DM3Ttf2p.js";import{a as I}from"./handler-helper.DSmWJMfl.js";import{P as b}from"./press-field.DJ0cczA4.js";import"./parent.B3qI5-tI.js";function B({options:o,currentOptions:n,dialogComponent:i,id:a}){const l=(o=Object.assign(Object.assign({},n),o)).context||function(){const t=e();return t[t.length-1]}();let s=P(l,o.selector);if(delete o.context,delete o.selector,!s&&i&&(s=t(i,a)),s){const t={...o};_(s,t);return _(s,t,"showDialog").then((t=>Promise.resolve(t))).catch((t=>Promise.reject(t)))}const c=`The ${o.selector} node is not found, please confirm whether the selector and context are correct`;return console.warn(c),Promise.reject(c)}const j={show:{type:Boolean,default:!1},src:{type:String,default:""},dialogType:{type:[Number,String],default:1},title:{type:String,default:o("dialog.title")},content:{type:String,default:""},canTouchRemove:{type:Boolean,default:!0},confirmText:{type:String,default:o("confirm")},cancelText:{type:String,default:""},onClickCancel:{type:[Function,null],default:null},onConfirmClick:{type:[Function,null],default:null},htmlContent:{type:String,default:""},zIndex:{type:[Number,String],default:"99"},useScrollView:{type:Boolean,default:!1},onClickImage:{type:[Function,null],default:null},onLongPressImage:{type:[Function,null],default:null},showField:{type:Boolean,default:!1},fieldPlaceHolder:{type:String,default:""},fieldValue:{type:String,default:""},customClass:{type:String,default:""}};const O=n({name:"PressDialogPlus",options:{...s(!0,!1),styleIsolation:"shared"},components:{PressButton:l,PressField:b},mixins:[i(j),a],props:{...j},emits:["confirm","cancel","onLongPressImage","onClickImage"],data:()=>({resolve:"",reject:"",promise:"",mShowButtonLoading:!1,inputValue:""}),watch:{dataFieldValue:{handler(t){this.inputValue=t},immediate:!0}},mounted(){},methods:{preventTouchMove(){},confirm(){if(2===this.dataDialogType){if(this.mShowButtonLoading)return;this.mShowButtonLoading=!0}"function"==typeof this.dataOnConfirmClick?c(this.dataOnConfirmClick(this)).then((t=>{t&&this.resolveConfirm()})).catch((()=>{})):this.resolveConfirm()},resolveConfirm(){this.resolve&&this.resolve("confirm"),this.$emit("confirm"),this.remove()},cancel(){"function"==typeof this.dataOnClickCancel&&this.dataOnClickCancel(this),"function"==typeof this.reject&&this.reject("cancel"),this.$emit("cancel"),this.remove()},showDialog(){return this.dataShow=!0,this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e})),this.promise},touchRemove(){this.dataCanTouchRemove&&this.remove(),this.$emit("cancel")},remove(){this.dataShow=!1,this.mShowButtonLoading=!1},destroy(){},handleLongPressImage(){"function"==typeof this.dataOnLongPressImage&&this.dataOnLongPressImage(),this.$emit("onLongPressImage")},handleClickImage(){"function"==typeof this.dataOnClickImage&&this.dataOnClickImage(),this.$emit("onClickImage")},onChangeField(t){this.inputValue=t}}},[["render",function(t,e,o,n,i,a){const l=T,s=k("PressField"),c=k("PressButton");return t.dataShow?(v(),r("div",{key:0,class:w(["press-dialog",t.dataCustomClass]),style:y({zIndex:`${t.dataZIndex}`}),onClick:e[2]||(e[2]=p(((...t)=>a.touchRemove&&a.touchRemove(...t)),["stop"])),onTouchmove:e[3]||(e[3]=p(((...t)=>a.preventTouchMove&&a.preventTouchMove(...t)),["stop"]))},[h("div",{class:"press-dialog__content-wrap"},[h("p",{class:"press-dialog__title"},u(t.dataTitle),1),t.dataUseScrollView&&t.dataHtmlContent?(v(),m(l,{key:0,"scroll-y":"true",class:"press-dialog__content",innerHTML:t.dataHtmlContent},null,8,["innerHTML"])):t.dataHtmlContent?(v(),r("p",{key:1,class:"press-dialog__content",innerHTML:t.dataHtmlContent},null,8,["innerHTML"])):d("",!0),t.dataHtmlContent?d("",!0):(v(),r("p",{key:2,class:"press-dialog__content"},u(t.dataContent),1)),t.dataShowField?(v(),m(s,{key:3,"custom-class":"press-dialog__field","title-width":"0",placeholder:t.dataFieldPlaceHolder,value:t.dataFieldValue,"model-value":t.dataFieldValue,onChange:a.onChangeField},null,8,["placeholder","value","model-value","onChange"])):d("",!0),t.dataSrc?(v(),r("div",{key:4,class:"press-dialog__img-wrap"},[t.dataSrc?(v(),r("img",{key:0,class:"press-dialog__img","show-menu-by-longpress":!0,src:t.dataSrc,onClick:e[0]||(e[0]=p(((...t)=>a.handleClickImage&&a.handleClickImage(...t)),["stop"])),onLongpress:e[1]||(e[1]=(...t)=>a.handleLongPressImage&&a.handleLongPressImage(...t))},null,40,["src"])):d("",!0)])):d("",!0),h("div",{class:"press-dialog__btn--wrap"},[t.dataCancelText&&t.dataCancelText.length>0?(v(),r(g,{key:0},[h("div",{class:"press-dialog__btn--spacing"},[f(c,{type:"e-sport-secondary","custom-style":"width: 100px;height: 36px;",onClick:a.cancel},{default:C((()=>[S(u(t.dataCancelText),1)])),_:1},8,["onClick"])]),f(c,{type:"e-sport-primary-bg",loading:i.mShowButtonLoading,"custom-style":"width: 100px;height: 36px;",onClick:a.confirm},{default:C((()=>[S(u(i.mShowButtonLoading?"":t.dataConfirmText),1)])),_:1},8,["loading","onClick"])],64)):t.dataConfirmText||i.mShowButtonLoading?(v(),m(c,{key:1,type:"e-sport-primary-bg",loading:i.mShowButtonLoading,"custom-style":"width: 148px;height: 36px;",onClick:a.confirm},{default:C((()=>[S(u(i.mShowButtonLoading?"":t.dataConfirmText),1)])),_:1},8,["loading","onClick"])):d("",!0)])])],38)):d("",!0)}],["__scopeId","data-v-f22c1d07"]]);let M=[];const F=Object.keys(j).reduce(((t,e)=>(t[e]=j[e].default,t)),{selector:"#tip-match-comm-tips-dialog"});let H=Object.assign({},F);const V=t=>B({options:t,currentOptions:H,id:"tip-dialog-showCommTipsDialog",dialogComponent:O});V.show=t=>V(t),I({Dialog:V,queue:M,currentOptions:H,defaultOptions:F,updateQueue:function(t){M=t},updateCurrentOptions:function(t){H=t}});const R=V.show,$=function(){return new Promise((t=>{setTimeout((()=>{t(!0)}),3e3)}))};const D=n({i18n:{"zh-CN":{customButton:"自定义按钮",customContent:"自定义内容",noCancel:"没有取消按钮",noCancelLoading:"没有取消+加载中",image:"图片",html:"HTML内容",field:"输入框",noMask:"点击蒙层不可关闭",longText:"长文本",onlyCaption:"仅限队长报名，发给队长来报名吧！",custom:"自定义",componentCall:"组件调用",multiple:"多例",longContent:()=>["念奴娇·赤壁怀古","大江东去，浪淘尽，千古风流人物。故垒西边，人道是，三国周郎赤壁。乱石穿空，惊涛拍岸，卷起千堆雪。江山如画，一时多少豪杰。","遥想公瑾当年，小乔初嫁了，雄姿英发。羽扇纶巾，谈笑间，樯橹灰飞烟灭。故国神游，多情应笑我，早生华发。人生如梦，一尊还酹江月。","<br/>","沁园春·雪","北国风光，千里冰封，万里雪飘。望长城内外，惟余莽莽；大河上下，顿失滔滔。山舞银蛇，原驰蜡象，欲与天公试比高。须晴日，看红装素裹，分外妖娆。","江山如此多娇，引无数英雄竞折腰。惜秦皇汉武，略输文采；唐宗宋祖，稍逊风骚。一代天骄，成吉思汗，只识弯弓射大雕。俱往矣，数风流人物，还看今朝。","<br/>","沁园春·长沙","独立寒秋，湘江北去，橘子洲头。看万山红遍，层林尽染；漫江碧透，百舸争流。鹰击长空，鱼翔浅底，万类霜天竞自由。怅寥廓，问苍茫大地，谁主沉浮？","携来百侣曾游，忆往昔峥嵘岁月稠。恰同学少年，风华正茂；书生意气，挥斥方遒。指点江山，激扬文字，粪土当年万户侯。曾记否，到中流击水，浪遏飞舟？"].join("<br/>")},"en-US":{customButton:"Custom Button",customContent:"Custom Content",noCancel:"No Cancel",noCancelLoading:"No Cancel and Loading",image:"Image",html:"HTML Content",field:"Input",noMask:"No Close By Mask",longText:"Long Text",onlyCaption:"Only the captain can sign up, send it to the captain to sign up!",custom:"Custom ",componentCall:"Component Call",multiple:"Multiple",longContent:()=>["Reflections on the Ancient Red Cliff--To the tune of Niannujiao","","The Great River flows,","Eastward waves sweeping away,","For thousands of years, gallant heroes.","West of the ancient fort, they say, stands","The Red Cliff of the Three-Kingdoms' Duke Zhou.","Rocks pierce the sky, shore-tearing","Waves swirl into piles of snow.","What a glorious sweep of land,","Once a stage for so many a hero!","","My thoughts drift to those years when Zhou","Had newly married the beautiful Qiao,","Vigour and valour aglow.","A feather fan and a silken hat,","He masterminded the fire-attack on the foe--","Over a casual chat","To see their fleet perish, blow by blow.","Back from my mental vagrancy in that bygone age,","I must laugh at myself: letting sentiments grow","Into grey hairs, too soon.","But isn't life a dream, after all？","Let me pledge this cup to the River,","To the Moon."].join("<br/>")}},components:{PressDialogPlus:O,PressCell:L},data(){return{sectionStyle:"",show:!1,show2:!1,curType:"",dialogTypeList:[{title:this.t("basicUsage"),list:[{name:"normal",title:this.t("basicUsage")},{name:"noTouchMove",title:this.t("noMask")}]},{title:this.t("customContent"),list:[{name:"img",title:this.t("image")},{name:"html",title:this.t("html")},{name:"longText",title:this.t("longText")},{name:"field",title:this.t("field")}]},{title:this.t("customButton"),list:[{name:"noCancel",title:this.t("noCancel")},{name:"loading",title:this.t("loadingStatus")},{name:"noCancelLoading",title:this.t("noCancelLoading")}]},{title:this.t("componentCall"),list:[{name:"componentCall",title:this.t("componentCall")},{name:"multiple",title:this.t("multiple")}]}]}},methods:{onShowDialog(t){if(this.curType=t,"componentCall"===t)return void(this.show=!0);if("multiple"===t)return this.show=!0,void(this.show2=!0);let e=this.t("cancel"),o=1,n=null,i=this.t("onlyCaption"),a="",l="",s=!0,c=!1,r=!1,d="",h="";"noCancel"===t?e="":"loading"===t?(o=2,n=$):"noCancelLoading"===t?(o=2,e="",n=$):"html"===t?(i="",a=`<div>${this.t("custom")}<span style="color: red;">${this.t("content")}</span></div>`):"img"===t?l="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2023/10/own_mike_19f9b1ecdd9332c7c0.jpg":"noTouchMove"===t?s=!1:"longText"===t?(i="",a=`<div style="max-height:100%;overflow:scroll;">${this.t("longContent")}</div>`,c=!0):"field"===t&&(r=!0,d="随便输点什么吧",i="",h="Press UI",s=!1,n=t=>t.inputValue?(this.onGTip(`内容: ${t.inputValue}`),!0):(this.onGTip("请输入内容"),!1)),R({context:this,title:this.t("title"),content:i,htmlContent:a,src:l,onLongPressImage:null,confirmText:this.t("confirm"),cancelText:e,dialogType:o,onConfirmClick:n,canTouchRemove:s,useScrollView:c,showField:r,fieldPlaceHolder:d,fieldValue:h}).then((()=>{"field"!==t&&this.onGTip("confirm")})).catch((()=>{this.onGTip("cancel")}))},onConfirm(t){this[t]=!1,"field"!==this.curType&&this.onGTip("confirm")},onCancel(t){this[t]=!1,this.onGTip("cancel")}}},[["render",function(t,e,o,n,i,a){const l=k("PressCell"),s=k("demo-block"),c=k("PressDialogPlus");return v(),r("div",{class:"demo-wrap"},[(v(!0),r(g,null,x(i.dialogTypeList,((t,e)=>(v(),m(s,{key:e,title:t.title,"section-style":i.sectionStyle},{default:C((()=>[(v(!0),r(g,null,x(t.list,(t=>(v(),m(l,{key:t.name,title:t.title,"is-link":"",onClick:e=>a.onShowDialog(t.name)},null,8,["title","onClick"])))),128))])),_:2},1032,["title","section-style"])))),128)),f(c,{id:"tip-match-comm-tips-dialog",ref:"tip-match-comm-tips-dialog"},null,512),f(c,{title:t.t("title"),show:i.show,content:"Some fake news",onConfirm:e[0]||(e[0]=t=>a.onConfirm("show")),onCancel:e[1]||(e[1]=t=>a.onCancel("show"))},null,8,["title","show"]),f(c,{title:t.t("title"),show:i.show2,content:"Some fake news 2",onConfirm:e[2]||(e[2]=t=>a.onConfirm("show2")),onCancel:e[3]||(e[3]=t=>a.onCancel("show2"))},null,8,["title","show"])])}]]);export{D as default};
